{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{\"+DjP\":function(e,t,n){\"use strict\";var r=n(\"rePB\"),o=n(\"q1tI\");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e,t,n){var a=Object(o.useState)(e),i=a[0],u=a[1],l=Object(o.useState)({}),s=l[0],p=l[1],d=Object(o.useState)(!1),f=d[0],m=d[1];Object(o.useEffect)((function(){f&&(0===Object.keys(s).length&&n(),m(!1))}),[s]);return{valores:i,errores:s,handleChange:function(e){u(c(c({},i),{},Object(r.a)({},e.target.name,e.target.value)))},handleSubmit:function(e){e.preventDefault();var n=t(i);p(n),m(!0)},handleBlur:function(){var e=t(i);p(e)}}}},\"HaE+\":function(e,t,n){\"use strict\";function r(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(l){return void n(l)}i.done?t(u):Promise.resolve(u).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var c=e.apply(t,n);function i(e){r(c,o,a,i,u,\"next\",e)}function u(e){r(c,o,a,i,u,\"throw\",e)}i(void 0)}))}}n.d(t,\"a\",(function(){return o}))},KQpA:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(\"q1tI\"),c=l(a),i=l(n(\"zpNE\")),u=l(n(\"hu/m\"));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!==typeof t&&\"function\"!==typeof t?e:t}function p(e){var t=/(?:\\.([^.]+))?$/.exec(e);return null!=t&&null!=t[0]?t[0]:\"\"}var d=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var o=arguments.length,a=Array(o),c=0;c<o;c++)a[c]=arguments[c];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.uploadTasks=[],r.handleFileSelection=function(e){for(var t=e.target.files,n=0;n<t.length;n++)r.startUpload(t[n])},s(r,n)}return function(e,t){if(\"function\"!==typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:\"componentWillUnmount\",value:function(){this.cancelRunningUploads()}},{key:\"cancelRunningUploads\",value:function(){for(;this.uploadTasks.length>0;){var e=this.uploadTasks.pop();\"running\"===e.snapshot.state&&e.cancel()}}},{key:\"removeTask\",value:function(e){for(var t=0;t<this.uploadTasks.length;t++)if(this.uploadTasks[t]===e)return void this.uploadTasks.splice(t,1)}},{key:\"startUpload\",value:function(e){var t=this,n=this.props,r=n.onUploadStart,o=n.onProgress,a=n.onUploadError,c=n.onUploadSuccess,l=n.storageRef,s=n.metadata,d=n.randomizeFilename,f=n.filename,m=void 0;p(m=f?\"function\"===typeof f?f(e):f:d?(0,i.default)():e.name)||(m+=p(e.name)),Promise.resolve().then((function(){return e.type.match(/image.*/)&&(t.props.maxWidth||t.props.maxHeight)?(0,u.default)(e,t.props.maxWidth,t.props.maxHeight):e})).then((function(e){var n=l.child(m).put(e,s);r&&r(e,n),n.on(\"state_changed\",(function(e){return o&&o(Math.round(100*e.bytesTransferred/e.totalBytes),n)}),(function(e){return a&&a(e,n)}),(function(){return t.removeTask(n),c&&c(n.snapshot.metadata.name,n)})),t.uploadTasks.push(n)}))}},{key:\"render\",value:function(){var e=this.props,t=(e.storageRef,e.onUploadStart,e.onProgress,e.onUploadSuccess,e.onUploadError,e.randomizeFilename,e.metadata,e.filename,e.maxWidth,e.maxHeight,e.hidden),n=e.as,o=void 0===n?\"input\":n,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,[\"storageRef\",\"onUploadStart\",\"onProgress\",\"onUploadSuccess\",\"onUploadError\",\"randomizeFilename\",\"metadata\",\"filename\",\"maxWidth\",\"maxHeight\",\"hidden\",\"as\"]),i=t?Object.assign({},a.style,{width:\"0.1px\",height:\"0.1px\",opacity:0,overflow:\"hidden\",position:\"absolute\",zIndex:-1}):a.style;return c.default.createElement(o,r({type:\"file\",onChange:this.handleFileSelection},a,{style:i}))}}]),t}(a.Component);t.default=d},QlwQ:function(e,t,n){\"use strict\";n.d(t,\"c\",(function(){return o})),n.d(t,\"a\",(function(){return a})),n.d(t,\"d\",(function(){return c})),n.d(t,\"b\",(function(){return i}));var r=n(\"wTIg\");var o=Object(r.a)(\"form\",{target:\"e1ngndrr0\"})({name:\"4e158y\",styles:\"max-width:600px;width:95%;margin:5rem auto 0 auto;fieldset{margin:2rem 0;border:1px solid #e1e1e1;font-size:2rem;padding:2rem}\"}),a=Object(r.a)(\"div\",{target:\"e1ngndrr1\"})({name:\"1a8wuji\",styles:\"margin-bottom:2rem;display:flex;align-items:center;label{flex:0 0 150px;font-size:1.8rem;}input,textarea{flex:1;padding:1rem;}textarea{height:300px;}\"}),c=Object(r.a)(\"input\",{target:\"e1ngndrr2\"})({name:\"5gttg\",styles:\"background-color:var(--naranja);width:100%;padding:1.2rem;text-align:center;color:#FFF;font-size:1.8rem;text-transform:uppercase;border:none;font-family:'PT Sans',sans-serif;font-weight:700;&:hover{cursor:pointer;}\"}),i=Object(r.a)(\"p\",{target:\"e1ngndrr3\"})({name:\"16hlejl\",styles:\"background-color:red;padding:1rem;font-family:'PT Sans',sans-serif;font-weight:700;text-align:center;color:#FFF;text-transform:uppercase;font-size:1.4rem;margin:2rem 0;\"})},Sfbb:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(){Object.defineProperty(HTMLCanvasElement.prototype,\"toBlob\",{value:function(e,t,n){for(var r=atob(this.toDataURL(t,n).split(\",\")[1]),o=r.length,a=new Uint8Array(o),c=0;c<o;c++)a[c]=r.charCodeAt(c);e(new Blob([a],{type:t||\"image/png\"}))}})}},TCLN:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/nuevo-producto\",function(){return n(\"cf6P\")}])},V5hS:function(e,t){var n=\"undefined\"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||\"undefined\"!=typeof msCrypto&&\"function\"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},cf6P:function(e,t,n){\"use strict\";n.r(t);var r=n(\"o0o1\"),o=n.n(r),a=n(\"HaE+\"),c=n(\"q1tI\"),i=n.n(c),u=n(\"qKvR\"),l=n(\"oHpw\"),s=n(\"nOHt\"),p=n(\"QlwQ\"),d=n(\"1raA\"),f=n(\"KQpA\"),m=n.n(f),b=n(\"uM4m\"),h=n(\"+DjP\");function g(e){var t={};return e.nombre||(t.nombre=\"El nombre es obligatorio\"),e.empresa||(t.empresa=\"Nombre de Emoresa es obligatorio\"),e.url?/^(ftp|http|https):\\/\\/[^ \"]+$/.test(e.url)||(t.url=\"URL no v\\xe1lida\"):t.url=\"La URL es obligatoria\",e.descripcion||(t.descripcion=\"Agrega un descripci\\xf3n de tu producto\"),t}i.a.createElement;var v={nombre:\"\",empresa:\"\",url:\"\",descripcion:\"\"},y={name:\"1ap128e\",styles:\"text-align:center;margin-top:5rem;\"};t.default=function(){var e=Object(c.useState)(\"\"),t=(e[0],e[1]),n=Object(c.useState)(!1),r=(n[0],n[1]),i=Object(c.useState)(0),f=(i[0],i[1]),O=Object(c.useState)(\"\"),j=O[0],w=O[1],x=Object(c.useState)(\"\"),P=x[0],S=(x[1],Object(h.a)(v,g,(function(){return z.apply(this,arguments)}))),E=S.valores,U=S.errores,_=S.handleChange,C=S.handleSubmit,k=S.handleBlur,R=E.nombre,T=E.empresa,F=(E.imagen,E.url),M=E.descripcion,N=Object(s.useRouter)(),B=Object(c.useContext)(d.FirebaseContext),D=B.usuario,L=B.firebase;function z(){return(z=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=2;break}return e.abrupt(\"return\",N.push(\"/login\"));case 2:return t={nombre:R,empresa:T,url:F,urlImagen:j,descripcion:M,votos:0,comentarios:[],creado:Date.now(),creador:{id:D.uid,nombre:D.displayName},haVotado:[]},L.db.collection(\"productos\").add(t),e.abrupt(\"return\",N.push(\"/\"));case 5:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.c)(\"div\",null,Object(u.c)(l.a,null,D?Object(u.c)(c.Fragment,null,Object(u.c)(\"h1\",{css:y},\"Nuevo Producto\"),Object(u.c)(p.c,{onSubmit:C,noValidate:!0},Object(u.c)(\"fieldset\",null,Object(u.c)(\"legend\",null,\"Informaci\\xf3n del Producto\"),Object(u.c)(p.a,null,Object(u.c)(\"label\",{htmlFor:\"nombre\"},\"Nombre\"),Object(u.c)(\"input\",{type:\"text\",id:\"nombre\",placeholder:\"Nombre del Producto\",name:\"nombre\",value:R,onChange:_,onBlur:k})),U.nombre&&Object(u.c)(p.b,null,U.nombre),Object(u.c)(p.a,null,Object(u.c)(\"label\",{htmlFor:\"empresa\"},\"Empresa\"),Object(u.c)(\"input\",{type:\"text\",id:\"empresa\",placeholder:\"Nombre Empresa o Compan\\xeda\",name:\"empresa\",value:T,onChange:_,onBlur:k})),U.empresa&&Object(u.c)(p.b,null,U.empresa),Object(u.c)(p.a,null,Object(u.c)(\"label\",{htmlFor:\"imagen\"},\"Imagen\"),Object(u.c)(m.a,{accept:\"image/*\",id:\"imagen\",name:\"imagen\",randomizeFilename:!0,storageRef:L.storage.ref(\"productos\"),onUploadStart:function(){f(0),r(!0)},onUploadError:function(e){r(e),console.error(e)},onUploadSuccess:function(e){f(100),r(!1),t(e),L.storage.ref(\"productos\").child(e).getDownloadURL().then((function(e){console.log(e),w(e)}))},onProgress:function(e){return f({progreso:e})}})),Object(u.c)(p.a,null,Object(u.c)(\"label\",{htmlFor:\"url\"},\"URL\"),Object(u.c)(\"input\",{type:\"url\",id:\"url\",placeholder:\"URL de tu producto\",name:\"url\",value:F,onChange:_,onBlur:k})),U.url&&Object(u.c)(p.b,null,U.url)),Object(u.c)(\"fieldset\",null,Object(u.c)(\"legend\",null,\"Sobre tu producto\"),Object(u.c)(p.a,null,Object(u.c)(\"label\",{htmlFor:\"descripcion\"},\"Descripci\\xf3n\"),Object(u.c)(\"textarea\",{id:\"descripcion\",name:\"descripcion\",value:M,onChange:_,onBlur:k})),U.descripcion&&Object(u.c)(p.b,null,U.descripcion)),P&&Object(u.c)(p.b,null,P),Object(u.c)(p.d,{type:\"submit\",value:\"Crear Producto\"}))):Object(u.c)(b.a,null)))}},\"hu/m\":function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e,t,n){HTMLCanvasElement.prototype.toBlob||(0,a.default)();return new Promise((function(r,o){var a=new FileReader;a.onload=function(a){var c=new Image;c.onload=function(a){var i=document.createElement(\"canvas\"),u=t||c.width,l=n||c.height;i.width=u,i.height=l;var s=u/c.width,p=l/c.height,d=Math.max(s,p),f=d*c.width,m=d*c.height,b=Math.min((l-m)/2,0),h=Math.min((u-f)/2,0),g=i.getContext(\"2d\");if(!g)return o(\"Could not get the context of the canvas element\");g.drawImage(c,h,b,f,m),i.toBlob((function(e){r(e)}),e.type)},c.src=a.target.result},a.readAsDataURL(e)}))};var r,o=n(\"Sfbb\"),a=(r=o)&&r.__esModule?r:{default:r}},rnWd:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],\"-\",o[e[r++]],o[e[r++]],\"-\",o[e[r++]],o[e[r++]],\"-\",o[e[r++]],o[e[r++]],\"-\",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join(\"\")}},uM4m:function(e,t,n){\"use strict\";var r=n(\"q1tI\"),o=n.n(r),a=n(\"qKvR\");o.a.createElement;var c={name:\"u2wvoe\",styles:\"margin-top:5rem;text-align:center;\"};t.a=function(){return Object(a.c)(\"h1\",{css:c},\"No se puede mostrar\")}},zpNE:function(e,t,n){var r=n(\"V5hS\"),o=n(\"rnWd\");e.exports=function(e,t,n){var a=t&&n||0;\"string\"==typeof e&&(t=\"binary\"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||r)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var i=0;i<16;++i)t[a+i]=c[i];return t||o(c)}}},[[\"TCLN\",0,2,1,3,4]]]);","extractedComments":[]}