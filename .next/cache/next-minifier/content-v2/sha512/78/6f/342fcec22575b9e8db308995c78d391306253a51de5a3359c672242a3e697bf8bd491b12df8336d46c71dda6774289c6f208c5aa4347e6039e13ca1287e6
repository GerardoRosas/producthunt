{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{\"2qVx\":function(e,t,r){\"use strict\";r.r(t);var n=r(\"rePB\");function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if(\"undefined\"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if(\"string\"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}var c=r(\"o0o1\"),i=r.n(c),u=r(\"HaE+\"),s=r(\"wTIg\"),l=r(\"q1tI\"),d=r.n(l),f=r(\"nOHt\"),m=r(\"oHpw\"),p=r(\"qKvR\"),b=r(\"QlwQ\"),g=r(\"Xtw+\"),j=r(\"1raA\"),O=r(\"uM4m\");d.a.createElement;function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=Object(s.a)(\"div\",{target:\"eedffhf0\"})({name:\"uunn56\",styles:\"@media(min-width:768px){display:grid;grid-template-columns:2fr 1fr;column-gap:2rem;}\"}),w=Object(s.a)(\"p\",{target:\"eedffhf1\"})({name:\"15q0m4y\",styles:\"padding:.5rem 2rem;background-color:#DA552F;color:#fff;text-transform:uppercase;font-weight:bold;text-align:center;display:inline-block;\"}),x={name:\"1ap128e\",styles:\"text-align:center;margin-top:5rem;\"},k={name:\"xqqg40\",styles:\"margin:2rem 0;\"},P={name:\"1x0f0jw\",styles:\"border:1px solid #e1e1e1;padding:2rem;\"},S={name:\"in3yi3\",styles:\"font-weight:bold;\"},E={name:\"aeoew\",styles:\"margin-top:5rem;\"},A={name:\"xi606m\",styles:\"text-align:center;\"};t.default=function(){var e=Object(l.useState)({}),t=e[0],r=e[1],a=Object(l.useState)(!1),c=a[0],s=a[1],y=Object(l.useState)({}),C=y[0],I=y[1],q=Object(l.useState)(!0),F=q[0],V=q[1],N=Object(f.useRouter)(),T=N.query.id,_=Object(l.useContext)(j.FirebaseContext),D=_.firebase,z=_.usuario;if(Object(l.useEffect)((function(){T&&F&&function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.db.collection(\"productos\").doc(T);case 2:return t=e.sent,e.next=5,t.get();case 5:(n=e.sent).exists?(r(n.data()),V(!1)):(s(!0),V(!1));case 7:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[T]),0===Object.keys(t).length&&!c)return\"Cargando...\";var H=t.comentarios,Q=(t.empresa,t.descripcion),R=t.votos,M=t.nombre,X=t.url,J=t.urlImagen,K=(t.creado,t.creador),U=t.haVotado,W=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z){e.next=2;break}return e.abrupt(\"return\",N.push(\"/login\"));case 2:if(K.id===z.uid){e.next=4;break}return e.abrupt(\"return\",N.push(\"/login\"));case 4:return e.prev=4,e.next=7,D.db.collection(\"productos\").doc(T).delete();case 7:N.push(\"/\"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:case\"end\":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();return Object(p.c)(m.a,null,Object(p.c)(d.a.Fragment,null,c&&Object(p.c)(O.a,null),Object(p.c)(\"div\",{className:\"contenedor\"},Object(p.c)(\"h1\",{css:x},M),Object(p.c)(h,null,Object(p.c)(\"div\",null,Object(p.c)(\"img\",{src:J}),Object(p.c)(\"p\",null,Q),z&&Object(p.c)(d.a.Fragment,null,Object(p.c)(\"h2\",null,\"Agrega tu comentario\"),Object(p.c)(\"form\",{onSubmit:function(e){if(e.preventDefault(),!z)return N.push(\"/login\");C.usuarioId=z.uid,C.usuarioNombre=z.displayName;var n=[].concat(o(H),[C]);D.db.collection(\"productos\").doc(T).update({comentarios:n}),r(v(v({},t),{},{comentarios:n}))}},Object(p.c)(b.a,null,Object(p.c)(\"input\",{type:\"text\",name:\"mensaje\",onChange:function(e){I(v(v({},C),{},Object(n.a)({},e.target.name,e.target.value)))}})),Object(p.c)(b.d,{type:\"submit\",value:\"Agregar Comentario\"}))),Object(p.c)(\"h2\",{css:k},\"Comentarios\"),0===H.length?\"A\\xfan no hay comentarios\":Object(p.c)(\"ul\",null,H.map((function(e,t){return Object(p.c)(\"li\",{key:\"\".concat(e.usuarioId,\"-\").concat(t),css:P},Object(p.c)(\"p\",null,e.mensaje),Object(p.c)(\"p\",null,\"Escrito por:\",Object(p.c)(\"span\",{css:S},\"\",\" \",e.usuarioNombre)),function(e){if(K.id===e)return!0}(e.usuarioId)&&Object(p.c)(w,null,\"Es Creador\"))})))),Object(p.c)(\"aside\",null,Object(p.c)(g.a,{target:\"_blank\",bgColor:\"true\",href:X},\"Visitar URL\"),Object(p.c)(\"div\",{css:E},Object(p.c)(\"p\",{css:A},R,\" Votos\"),z&&Object(p.c)(g.a,{onClick:function(){if(!z)return N.push(\"/login\");var e=R+1;if(!U.includes(z.uid)){var n=[].concat(o(U),[z.uid]);D.db.collection(\"productos\").doc(T).update({votos:e,haVotado:n}),r(v(v({},t),{},{votos:e})),V(!0)}}},\"Votar\")))),!!z&&(K.id===z.uid||void 0)&&Object(p.c)(g.a,{onClick:W},\"Eliminar Producto\"))))}},\"HaE+\":function(e,t,r){\"use strict\";function n(e,t,r,n,a,o,c){try{var i=e[o](c),u=i.value}catch(s){return void r(s)}i.done?t(u):Promise.resolve(u).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var c=e.apply(t,r);function i(e){n(c,a,o,i,u,\"next\",e)}function u(e){n(c,a,o,i,u,\"throw\",e)}i(void 0)}))}}r.d(t,\"a\",(function(){return a}))},QlwQ:function(e,t,r){\"use strict\";r.d(t,\"c\",(function(){return a})),r.d(t,\"a\",(function(){return o})),r.d(t,\"d\",(function(){return c})),r.d(t,\"b\",(function(){return i}));var n=r(\"wTIg\");var a=Object(n.a)(\"form\",{target:\"e1ngndrr0\"})({name:\"4e158y\",styles:\"max-width:600px;width:95%;margin:5rem auto 0 auto;fieldset{margin:2rem 0;border:1px solid #e1e1e1;font-size:2rem;padding:2rem}\"}),o=Object(n.a)(\"div\",{target:\"e1ngndrr1\"})({name:\"1a8wuji\",styles:\"margin-bottom:2rem;display:flex;align-items:center;label{flex:0 0 150px;font-size:1.8rem;}input,textarea{flex:1;padding:1rem;}textarea{height:300px;}\"}),c=Object(n.a)(\"input\",{target:\"e1ngndrr2\"})({name:\"5gttg\",styles:\"background-color:var(--naranja);width:100%;padding:1.2rem;text-align:center;color:#FFF;font-size:1.8rem;text-transform:uppercase;border:none;font-family:'PT Sans',sans-serif;font-weight:700;&:hover{cursor:pointer;}\"}),i=Object(n.a)(\"p\",{target:\"e1ngndrr3\"})({name:\"16hlejl\",styles:\"background-color:red;padding:1rem;font-family:'PT Sans',sans-serif;font-weight:700;text-align:center;color:#FFF;text-transform:uppercase;font-size:1.4rem;margin:2rem 0;\"})},\"VWc+\":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/productos/[id]\",function(){return r(\"2qVx\")}])},uM4m:function(e,t,r){\"use strict\";var n=r(\"q1tI\"),a=r.n(n),o=r(\"qKvR\");a.a.createElement;var c={name:\"u2wvoe\",styles:\"margin-top:5rem;text-align:center;\"};t.a=function(){return Object(o.c)(\"h1\",{css:c},\"No se puede mostrar\")}}},[[\"VWc+\",0,2,1,3,4]]]);","extractedComments":[]}