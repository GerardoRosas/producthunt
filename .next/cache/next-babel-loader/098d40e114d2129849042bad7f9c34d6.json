{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/gerardorosas/Documents/producthunt/pages/nuevo-producto.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\nimport React, { Fragment, useState, useContext } from 'react';\nimport { css } from '@emotion/core';\nimport Layout from '../components/layout/Layout';\nimport Router, { useRouter } from 'next/router';\nimport { Formulario, Campo, InputSubmit, Errores } from '../components/UI/Formulario';\nimport { FirebaseContext } from '../firebase';\nimport useValidacion from '../hooks/useValidacion';\nimport validarCrearProducto from '../validacion/validarCrearProducto';\nimport { jsx as ___EmotionJSX } from \"@emotion/core\";\nvar STATE_INICIAL = {\n  nombre: '',\n  empresa: '',\n  //imagen: '',\n  url: '',\n  descripcion: ''\n};\n\nvar _ref = false ? {\n  name: \"a6z53d-NuevoProducto\",\n  styles: \"text-align:center;margin-top:5rem;;label:NuevoProducto;\"\n} : {\n  name: \"a6z53d-NuevoProducto\",\n  styles: \"text-align:center;margin-top:5rem;;label:NuevoProducto;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZXJhcmRvcm9zYXMvRG9jdW1lbnRzL3Byb2R1Y3RodW50L3BhZ2VzL251ZXZvLXByb2R1Y3RvLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJEb0IiLCJmaWxlIjoiL1VzZXJzL2dlcmFyZG9yb3Nhcy9Eb2N1bWVudHMvcHJvZHVjdGh1bnQvcGFnZXMvbnVldm8tcHJvZHVjdG8uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgRnJhZ21lbnQsIHVzZVN0YXRlLCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY29yZSc7XG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvbGF5b3V0L0xheW91dCc7XG5pbXBvcnQgUm91dGVyLCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCB7IEZvcm11bGFyaW8sIENhbXBvLCBJbnB1dFN1Ym1pdCwgRXJyb3JlcyB9IGZyb20gJy4uL2NvbXBvbmVudHMvVUkvRm9ybXVsYXJpbyc7XG5pbXBvcnQgeyBGaXJlYmFzZUNvbnRleHQgfSBmcm9tICcuLi9maXJlYmFzZSc7XG5cbmltcG9ydCB1c2VWYWxpZGFjaW9uIGZyb20gJy4uL2hvb2tzL3VzZVZhbGlkYWNpb24nO1xuaW1wb3J0IHZhbGlkYXJDcmVhclByb2R1Y3RvIGZyb20gJy4uL3ZhbGlkYWNpb24vdmFsaWRhckNyZWFyUHJvZHVjdG8nO1xuXG5jb25zdCBTVEFURV9JTklDSUFMID0ge1xuICBub21icmU6ICcnLFxuICBlbXByZXNhOiAnJyxcbiAgLy9pbWFnZW46ICcnLFxuICB1cmw6ICcnLFxuICBkZXNjcmlwY2lvbjogJydcbn1cblxuY29uc3QgTnVldm9Qcm9kdWN0byA9ICgpID0+IHtcbiAgXG4gIGNvbnN0IFsgZXJyb3IsIGd1YXJkYXJFcnJvciBdID0gdXNlU3RhdGUoJycpO1xuXG4gIGNvbnN0IHt2YWxvcmVzLCBlcnJvcmVzLCBoYW5kbGVDaGFuZ2UsIGhhbmRsZVN1Ym1pdCwgaGFuZGxlQmx1cn0gPSB1c2VWYWxpZGFjaW9uKFNUQVRFX0lOSUNJQUwsIHZhbGlkYXJDcmVhclByb2R1Y3RvLCBjcmVhclByb2R1Y3RvKTtcblxuICBjb25zdHsgbm9tYnJlLCBlbXByZXNhLCBpbWFnZW4sIHVybCwgZGVzY3JpcGNpb24gfSA9IHZhbG9yZXM7XG5cbiAgLy9Ib29rIGRlIHJvdXRpbmcgcGFyYSByZWRpcmVjY2lvbmFyXG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIC8vQ29udGV4dCBjb24gbGFzIG9wZXJhY2lvbmVzIGNydWQgZGUgZmlyZWJhc2VcbiAgY29uc3QgeyB1c3VhcmlvLCBmaXJlYmFzZSB9ID0gdXNlQ29udGV4dChGaXJlYmFzZUNvbnRleHQpO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIGNyZWFyUHJvZHVjdG8oKXtcbiAgICAvL1NpIGVsIHVzdWFyaW8gbm8gZXN0YSBhdW50ZW50aWNhZG8gbGxldmFyIGFsIGxvZ2luXG4gICAgaWYoIXVzdWFyaW8pIHtcbiAgICAgIHJldHVybiByb3V0ZXIucHVzaCgnL2xvZ2luJyk7XG4gICAgfSBcblxuICAgIC8vQ3JlYXIgZWwgb2JqZXRvIGRlIG51ZXZvIHByb2R1Y3RvXG4gICAgY29uc3QgcHJvZHVjdG8gPSB7XG4gICAgICBub21icmUsXG4gICAgICBlbXJwcmVzYSxcbiAgICAgIHVybCxcbiAgICAgIGRlc2NyaXBjaW9uLFxuICAgICAgdm90b3M6IDAsXG4gICAgICBjb21lbnRhcmlvcyA6IFtdLFxuICAgICAgY3JlYWRvOiBEYXRlLm5vdygpXG4gICAgfVxuXG4gICAgLy9JbnNlcnRhcmxvIGVuIGxhIGJhc2UgZGUgZGF0b3NcbiAgICBmaXJlYmFzZS5kYi5jb2xsZWN0aW9uKCdwcm9kdWN0b3MnKS5hZGQocHJvZHVjdG8pO1xuXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8TGF5b3V0PlxuICAgICAgICA8RnJhZ21lbnQ+XG4gICAgICAgICAgPGgxXG4gICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA1cmVtO1xuICAgICAgICAgICAgYH1cbiAgICAgICAgICA+TnVldm8gUHJvZHVjdG88L2gxPlxuICAgICAgICAgIDxGb3JtdWxhcmlvXG4gICAgICAgICAgICBvblN1Ym1pdD17aGFuZGxlU3VibWl0fVxuICAgICAgICAgICAgbm9WYWxpZGF0ZVxuICAgICAgICAgID5cblxuICAgICAgICAgICAgPGZpZWxkc2V0PlxuICAgICAgICAgICAgICA8bGVnZW5kPkluZm9ybWFjacOzbiBkZWwgUHJvZHVjdG88L2xlZ2VuZD5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8Q2FtcG8+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJub21icmVcIj5Ob21icmU8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgaWQ9XCJub21icmVcIiAgIFxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJUdSBub21icmVcIlxuICAgICAgICAgICAgICAgICAgbmFtZT1cIm5vbWJyZVwiXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17bm9tYnJlfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgIG9uQmx1cj17aGFuZGxlQmx1cn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0NhbXBvPlxuXG4gICAgICAgICAgICAgIHtlcnJvcmVzLm5vbWJyZSAmJiA8RXJyb3Jlcz57ZXJyb3Jlcy5ub21icmV9PC9FcnJvcmVzPn1cbiAgICBcbiAgICAgICAgICAgICAgPENhbXBvPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiZW1wcmVzYVwiPkVtcHJlc2E8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgaWQ9XCJlbXByZXNhXCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTm9tYnJlIEVtcHJlc2EgbyBDb21wYW7DrWFcIlxuICAgICAgICAgICAgICAgICAgbmFtZT1cImVtcHJlc2FcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2VtcHJlc2F9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgb25CbHVyPXtoYW5kbGVCbHVyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvQ2FtcG8+XG5cbiAgICAgICAgICAgICAge2Vycm9yZXMuZW1wcmVzYSAmJiA8RXJyb3Jlcz57ZXJyb3Jlcy5lbXByZXNhfTwvRXJyb3Jlcz59XG5cbiAgICAgICAgICAgICAgey8qIDxDYW1wbz5cbiAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImltYWdlblwiPkltYWdlbjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgICAgICAgICAgICBpZD1cImltYWdlblwiXG4gICAgICAgICAgICAgICAgICBuYW1lPVwiaW1hZ2VuXCJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtpbWFnZW59XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgb25CbHVyPXtoYW5kbGVCbHVyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvQ2FtcG8+XG5cbiAgICAgICAgICAgICAge2Vycm9yZXMuaW1hZ2VuICYmIDxFcnJvcmVzPntlcnJvcmVzLmltYWdlbn08L0Vycm9yZXM+fSAqL31cblxuICAgICAgICAgICAgICA8Q2FtcG8+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJ1cmxcIj5VUkw8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInVybFwiXG4gICAgICAgICAgICAgICAgICBpZD1cInVybFwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlVSTCBkZSB0dSBwcm9kdWN0b1wiXG4gICAgICAgICAgICAgICAgICBuYW1lPVwidXJsXCJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt1cmx9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgb25CbHVyPXtoYW5kbGVCbHVyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvQ2FtcG8+XG5cbiAgICAgICAgICAgICAge2Vycm9yZXMudXJsICYmIDxFcnJvcmVzPntlcnJvcmVzLnVybH08L0Vycm9yZXM+fSAgXG5cbiAgICAgICAgICAgIDwvZmllbGRzZXQ+XG5cbiAgICAgICAgICAgIDxmaWVsZHNldD5cbiAgICAgICAgICAgICAgPGxlZ2VuZD5Tb2JyZSB0dSBwcm9kdWN0bzwvbGVnZW5kPlxuXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8Q2FtcG8+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJkZXNjcmlwY2lvblwiPkRlc2NyaXBjacOzbjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlkPVwiZGVzY3JpcGNpb25cIlxuICAgICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXBjaW9uXCJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtkZXNjcmlwY2lvbn1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICBvbkJsdXI9e2hhbmRsZUJsdXJ9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9DYW1wbz5cblxuICAgICAgICAgICAgICB7ZXJyb3Jlcy5kZXNjcmlwY2lvbiAmJiA8RXJyb3Jlcz57ZXJyb3Jlcy5kZXNjcmlwY2lvbn08L0Vycm9yZXM+fVxuICAgICAgICAgICAgPC9maWVsZHNldD5cblxuXG5cbiAgICAgICAgICAgIHtlcnJvciAmJiA8RXJyb3Jlcz57ZXJyb3J9PC9FcnJvcmVzPn1cbiAgXG4gICAgICAgICAgICA8SW5wdXRTdWJtaXRcbiAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgIHZhbHVlPVwiQ3JlYXIgUHJvZHVjdG9cIlxuICAgICAgICAgICAgLz5cbiAgXG4gICAgICAgICAgPC9Gb3JtdWxhcmlvPlxuICAgICAgICA8L0ZyYWdtZW50PlxuICAgICAgPC9MYXlvdXQ+XG4gICAgICAgIFxuICAgIDwvZGl2PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IE51ZXZvUHJvZHVjdG87Il19 */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\n\nvar NuevoProducto = function NuevoProducto() {\n  _s();\n\n  var _useState = useState(''),\n      error = _useState[0],\n      guardarError = _useState[1];\n\n  var _useValidacion = useValidacion(STATE_INICIAL, validarCrearProducto, crearProducto),\n      valores = _useValidacion.valores,\n      errores = _useValidacion.errores,\n      handleChange = _useValidacion.handleChange,\n      handleSubmit = _useValidacion.handleSubmit,\n      handleBlur = _useValidacion.handleBlur;\n\n  var nombre = valores.nombre,\n      empresa = valores.empresa,\n      imagen = valores.imagen,\n      url = valores.url,\n      descripcion = valores.descripcion; //Hook de routing para redireccionar\n\n  var router = useRouter(); //Context con las operaciones crud de firebase\n\n  var _useContext = useContext(FirebaseContext),\n      usuario = _useContext.usuario,\n      firebase = _useContext.firebase;\n\n  function crearProducto() {\n    return _crearProducto.apply(this, arguments);\n  }\n\n  function _crearProducto() {\n    _crearProducto = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var producto;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (usuario) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", router.push('/login'));\n\n            case 2:\n              //Crear el objeto de nuevo producto\n              producto = {\n                nombre: nombre,\n                emrpresa: emrpresa,\n                url: url,\n                descripcion: descripcion,\n                votos: 0,\n                comentarios: [],\n                creado: Date.now()\n              }; //Insertarlo en la base de datos\n\n              firebase.db.collection('productos').add(producto);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _crearProducto.apply(this, arguments);\n  }\n\n  return ___EmotionJSX(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, ___EmotionJSX(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, ___EmotionJSX(Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, ___EmotionJSX(\"h1\", {\n    css: _ref,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, \"Nuevo Producto\"), ___EmotionJSX(Formulario, {\n    onSubmit: handleSubmit,\n    noValidate: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, ___EmotionJSX(\"fieldset\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, ___EmotionJSX(\"legend\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, \"Informaci\\xF3n del Producto\"), ___EmotionJSX(Campo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }, ___EmotionJSX(\"label\", {\n    htmlFor: \"nombre\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, \"Nombre\"), ___EmotionJSX(\"input\", {\n    type: \"text\",\n    id: \"nombre\",\n    placeholder: \"Tu nombre\",\n    name: \"nombre\",\n    value: nombre,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  })), errores.nombre && ___EmotionJSX(Errores, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 34\n    }\n  }, errores.nombre), ___EmotionJSX(Campo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }, ___EmotionJSX(\"label\", {\n    htmlFor: \"empresa\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, \"Empresa\"), ___EmotionJSX(\"input\", {\n    type: \"text\",\n    id: \"empresa\",\n    placeholder: \"Nombre Empresa o Compan\\xEDa\",\n    name: \"empresa\",\n    value: empresa,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  })), errores.empresa && ___EmotionJSX(Errores, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 35\n    }\n  }, errores.empresa), ___EmotionJSX(Campo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }, ___EmotionJSX(\"label\", {\n    htmlFor: \"url\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, \"URL\"), ___EmotionJSX(\"input\", {\n    type: \"url\",\n    id: \"url\",\n    placeholder: \"URL de tu producto\",\n    name: \"url\",\n    value: url,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  })), errores.url && ___EmotionJSX(Errores, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 31\n    }\n  }, errores.url)), ___EmotionJSX(\"fieldset\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, ___EmotionJSX(\"legend\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, \"Sobre tu producto\"), ___EmotionJSX(Campo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, ___EmotionJSX(\"label\", {\n    htmlFor: \"descripcion\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, \"Descripci\\xF3n\"), ___EmotionJSX(\"textarea\", {\n    id: \"descripcion\",\n    name: \"descripcion\",\n    value: descripcion,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  })), errores.descripcion && ___EmotionJSX(Errores, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 39\n    }\n  }, errores.descripcion)), error && ___EmotionJSX(Errores, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 23\n    }\n  }, error), ___EmotionJSX(InputSubmit, {\n    type: \"submit\",\n    value: \"Crear Producto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  })))));\n};\n\n_s(NuevoProducto, \"s81hrW/C8jxk87dYaN1KRqu8jXM=\", false, function () {\n  return [useValidacion, useRouter];\n});\n\n_c = NuevoProducto;\nexport default NuevoProducto;\n\nvar _c;\n\n$RefreshReg$(_c, \"NuevoProducto\");","map":{"version":3,"sources":["/Users/gerardorosas/Documents/producthunt/pages/nuevo-producto.js"],"names":["React","Fragment","useState","useContext","css","Layout","Router","useRouter","Formulario","Campo","InputSubmit","Errores","FirebaseContext","useValidacion","validarCrearProducto","STATE_INICIAL","nombre","empresa","url","descripcion","NuevoProducto","error","guardarError","crearProducto","valores","errores","handleChange","handleSubmit","handleBlur","imagen","router","usuario","firebase","push","producto","emrpresa","votos","comentarios","creado","Date","now","db","collection","add"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useContext } from 'react';\nimport { css } from '@emotion/core';\nimport Layout from '../components/layout/Layout';\nimport Router, { useRouter } from 'next/router';\nimport { Formulario, Campo, InputSubmit, Errores } from '../components/UI/Formulario';\nimport { FirebaseContext } from '../firebase';\n\nimport useValidacion from '../hooks/useValidacion';\nimport validarCrearProducto from '../validacion/validarCrearProducto';\n\nconst STATE_INICIAL = {\n  nombre: '',\n  empresa: '',\n  //imagen: '',\n  url: '',\n  descripcion: ''\n}\n\nconst NuevoProducto = () => {\n  \n  const [ error, guardarError ] = useState('');\n\n  const {valores, errores, handleChange, handleSubmit, handleBlur} = useValidacion(STATE_INICIAL, validarCrearProducto, crearProducto);\n\n  const{ nombre, empresa, imagen, url, descripcion } = valores;\n\n  //Hook de routing para redireccionar\n  const router = useRouter();\n\n  //Context con las operaciones crud de firebase\n  const { usuario, firebase } = useContext(FirebaseContext);\n\n  async function crearProducto(){\n    //Si el usuario no esta auntenticado llevar al login\n    if(!usuario) {\n      return router.push('/login');\n    } \n\n    //Crear el objeto de nuevo producto\n    const producto = {\n      nombre,\n      emrpresa,\n      url,\n      descripcion,\n      votos: 0,\n      comentarios : [],\n      creado: Date.now()\n    }\n\n    //Insertarlo en la base de datos\n    firebase.db.collection('productos').add(producto);\n\n  }\n\n  return (\n    <div>\n      <Layout>\n        <Fragment>\n          <h1\n            css={css`\n              text-align: center;\n              margin-top: 5rem;\n            `}\n          >Nuevo Producto</h1>\n          <Formulario\n            onSubmit={handleSubmit}\n            noValidate\n          >\n\n            <fieldset>\n              <legend>Información del Producto</legend>\n            \n              <Campo>\n                <label htmlFor=\"nombre\">Nombre</label>\n                <input\n                  type=\"text\"\n                  id=\"nombre\"   \n                  placeholder=\"Tu nombre\"\n                  name=\"nombre\"\n                  value={nombre}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                />\n              </Campo>\n\n              {errores.nombre && <Errores>{errores.nombre}</Errores>}\n    \n              <Campo>\n                <label htmlFor=\"empresa\">Empresa</label>\n                <input\n                  type=\"text\"\n                  id=\"empresa\"\n                  placeholder=\"Nombre Empresa o Companía\"\n                  name=\"empresa\"\n                  value={empresa}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                />\n              </Campo>\n\n              {errores.empresa && <Errores>{errores.empresa}</Errores>}\n\n              {/* <Campo>\n                <label htmlFor=\"imagen\">Imagen</label>\n                <input\n                  type=\"file\"\n                  id=\"imagen\"\n                  name=\"imagen\"\n                  value={imagen}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                />\n              </Campo>\n\n              {errores.imagen && <Errores>{errores.imagen}</Errores>} */}\n\n              <Campo>\n                <label htmlFor=\"url\">URL</label>\n                <input\n                  type=\"url\"\n                  id=\"url\"\n                  placeholder=\"URL de tu producto\"\n                  name=\"url\"\n                  value={url}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                />\n              </Campo>\n\n              {errores.url && <Errores>{errores.url}</Errores>}  \n\n            </fieldset>\n\n            <fieldset>\n              <legend>Sobre tu producto</legend>\n\n              \n              <Campo>\n                <label htmlFor=\"descripcion\">Descripción</label>\n                <textarea\n                  \n                  id=\"descripcion\"\n                  name=\"descripcion\"\n                  value={descripcion}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                />\n              </Campo>\n\n              {errores.descripcion && <Errores>{errores.descripcion}</Errores>}\n            </fieldset>\n\n\n\n            {error && <Errores>{error}</Errores>}\n  \n            <InputSubmit\n              type=\"submit\"\n              value=\"Crear Producto\"\n            />\n  \n          </Formulario>\n        </Fragment>\n      </Layout>\n        \n    </div>\n  )\n}\n\nexport default NuevoProducto;"]},"metadata":{},"sourceType":"module"}