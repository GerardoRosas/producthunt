{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/gerardorosas/Documents/producthunt/pages/nuevo-producto.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\nimport React, { Fragment, useState, useContext } from 'react';\nimport { css } from '@emotion/core';\nimport Layout from '../components/layout/Layout';\nimport Router, { useRouter } from 'next/router';\nimport { Formulario, Campo, InputSubmit, Errores } from '../components/UI/Formulario';\nimport { FirebaseContext } from '../firebase';\nimport FileUploader from 'react-firebase-file-uploader';\nimport Error404 from '../components/layout/404';\nimport useValidacion from '../hooks/useValidacion';\nimport validarCrearProducto from '../validacion/validarCrearProducto';\nimport { jsx as ___EmotionJSX } from \"@emotion/core\";\nvar STATE_INICIAL = {\n  nombre: '',\n  empresa: '',\n  //imagen: '',\n  url: '',\n  descripcion: ''\n};\n\nvar _ref = false ? {\n  name: \"a6z53d-NuevoProducto\",\n  styles: \"text-align:center;margin-top:5rem;;label:NuevoProducto;\"\n} : {\n  name: \"a6z53d-NuevoProducto\",\n  styles: \"text-align:center;margin-top:5rem;;label:NuevoProducto;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZXJhcmRvcm9zYXMvRG9jdW1lbnRzL3Byb2R1Y3RodW50L3BhZ2VzL251ZXZvLXByb2R1Y3RvLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXlHc0IiLCJmaWxlIjoiL1VzZXJzL2dlcmFyZG9yb3Nhcy9Eb2N1bWVudHMvcHJvZHVjdGh1bnQvcGFnZXMvbnVldm8tcHJvZHVjdG8uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgRnJhZ21lbnQsIHVzZVN0YXRlLCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vY29yZSc7XG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvbGF5b3V0L0xheW91dCc7XG5pbXBvcnQgUm91dGVyLCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCB7IEZvcm11bGFyaW8sIENhbXBvLCBJbnB1dFN1Ym1pdCwgRXJyb3JlcyB9IGZyb20gJy4uL2NvbXBvbmVudHMvVUkvRm9ybXVsYXJpbyc7XG5pbXBvcnQgeyBGaXJlYmFzZUNvbnRleHQgfSBmcm9tICcuLi9maXJlYmFzZSc7XG5pbXBvcnQgRmlsZVVwbG9hZGVyIGZyb20gJ3JlYWN0LWZpcmViYXNlLWZpbGUtdXBsb2FkZXInO1xuaW1wb3J0IEVycm9yNDA0IGZyb20gJy4uL2NvbXBvbmVudHMvbGF5b3V0LzQwNCc7XG5cbmltcG9ydCB1c2VWYWxpZGFjaW9uIGZyb20gJy4uL2hvb2tzL3VzZVZhbGlkYWNpb24nO1xuaW1wb3J0IHZhbGlkYXJDcmVhclByb2R1Y3RvIGZyb20gJy4uL3ZhbGlkYWNpb24vdmFsaWRhckNyZWFyUHJvZHVjdG8nO1xuXG5jb25zdCBTVEFURV9JTklDSUFMID0ge1xuICBub21icmU6ICcnLFxuICBlbXByZXNhOiAnJyxcbiAgLy9pbWFnZW46ICcnLFxuICB1cmw6ICcnLFxuICBkZXNjcmlwY2lvbjogJydcbn1cblxuY29uc3QgTnVldm9Qcm9kdWN0byA9ICgpID0+IHtcblxuICAvL1N0YXRlIGRlIGxhcyBpbWFnbmVzXG4gIGNvbnN0IFsgbm9tYnJlaW1hZ2VuLCBndWFyZGFyTm9tYnJlIF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFsgc3ViaWVuZG8sIGd1YXJkYXJTdWJpZW5kbyBdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbIHByb2dyZXNvLCBndWFyZGFyUHJvZ3Jlc28gXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbIHVybEltYWdlbiwgZ3VhcmRhclVybEltYWdlbiBdID0gdXNlU3RhdGUoJycpO1xuICBcbiAgY29uc3QgWyBlcnJvciwgZ3VhcmRhckVycm9yIF0gPSB1c2VTdGF0ZSgnJyk7XG5cbiAgY29uc3Qge3ZhbG9yZXMsIGVycm9yZXMsIGhhbmRsZUNoYW5nZSwgaGFuZGxlU3VibWl0LCBoYW5kbGVCbHVyfSA9IHVzZVZhbGlkYWNpb25cbiAgKFNUQVRFX0lOSUNJQUwsIHZhbGlkYXJDcmVhclByb2R1Y3RvLCBjcmVhclByb2R1Y3RvKTtcblxuICBjb25zdHsgbm9tYnJlLCBlbXByZXNhLCBpbWFnZW4sIHVybCwgZGVzY3JpcGNpb24gfSA9IHZhbG9yZXM7XG5cbiAgLy9Ib29rIGRlIHJvdXRpbmcgcGFyYSByZWRpcmVjY2lvbmFyXG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIC8vQ29udGV4dCBjb24gbGFzIG9wZXJhY2lvbmVzIGNydWQgZGUgZmlyZWJhc2VcbiAgY29uc3QgeyB1c3VhcmlvLCBmaXJlYmFzZSB9ID0gdXNlQ29udGV4dChGaXJlYmFzZUNvbnRleHQpO1xuXG5cbiAgYXN5bmMgZnVuY3Rpb24gY3JlYXJQcm9kdWN0bygpe1xuICAgIC8vU2kgZWwgdXN1YXJpbyBubyBlc3RhIGF1bnRlbnRpY2FkbyBsbGV2YXIgYWwgbG9naW5cbiAgICBpZighdXN1YXJpbykge1xuICAgICAgcmV0dXJuIHJvdXRlci5wdXNoKCcvbG9naW4nKTtcbiAgICB9IFxuXG4gICAgLy9DcmVhciBlbCBvYmpldG8gZGUgbnVldm8gcHJvZHVjdG9cbiAgICBjb25zdCBwcm9kdWN0byA9IHtcbiAgICAgIG5vbWJyZSxcbiAgICAgIGVtcHJlc2EsXG4gICAgICB1cmwsXG4gICAgICB1cmxJbWFnZW4sXG4gICAgICBkZXNjcmlwY2lvbixcbiAgICAgIHZvdG9zOiAwLFxuICAgICAgY29tZW50YXJpb3MgOiBbXSxcbiAgICAgIGNyZWFkbzogRGF0ZS5ub3coKSwgXG4gICAgICBjcmVhZG9yOiB7XG4gICAgICAgIGlkOiB1c3VhcmlvLnVpZCxcbiAgICAgICAgbm9tYnJlOiB1c3VhcmlvLmRpc3BsYXlOYW1lXG4gICAgICB9LFxuICAgICAgaGFWb3RhZG86IFtdXG4gICAgfVxuXG4gICAgLy9JbnNlcnRhcmxvIGVuIGxhIGJhc2UgZGUgZGF0b3NcbiAgICBmaXJlYmFzZS5kYi5jb2xsZWN0aW9uKCdwcm9kdWN0b3MnKS5hZGQocHJvZHVjdG8pO1xuXG4gICAgcmV0dXJuIHJvdXRlci5wdXNoKCcvJyk7XG5cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZVVwbG9hZFN0YXJ0ID0gKCkgPT4ge1xuICAgIGd1YXJkYXJQcm9ncmVzbygwKTtcbiAgICBndWFyZGFyU3ViaWVuZG8odHJ1ZSk7XG4gIH1cblxuICBjb25zdCBoYW5kbGVQcm9ncmVzcyA9IHByb2dyZXNvID0+IGd1YXJkYXJQcm9ncmVzbyh7IHByb2dyZXNvIH0pO1xuXG4gIGNvbnN0IGhhbmRsZVVwbG9hZEVycm9yID0gZXJyb3IgPT4ge1xuICAgICAgZ3VhcmRhclN1YmllbmRvKGVycm9yKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVVwbG9hZFN1Y2Nlc3MgPSBub21icmUgPT4ge1xuICAgICAgZ3VhcmRhclByb2dyZXNvKDEwMCk7XG4gICAgICBndWFyZGFyU3ViaWVuZG8oZmFsc2UpO1xuICAgICAgZ3VhcmRhck5vbWJyZShub21icmUpXG4gICAgICBmaXJlYmFzZVxuICAgICAgICAgIC5zdG9yYWdlXG4gICAgICAgICAgLnJlZihcInByb2R1Y3Rvc1wiKVxuICAgICAgICAgIC5jaGlsZChub21icmUpXG4gICAgICAgICAgLmdldERvd25sb2FkVVJMKClcbiAgICAgICAgICAudGhlbih1cmwgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2codXJsKTtcbiAgICAgICAgICAgIGd1YXJkYXJVcmxJbWFnZW4odXJsKTtcbiAgICAgICAgICB9ICk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPExheW91dD5cbiAgICAgICAgeyF1c3VhcmlvID8gPEVycm9yNDA0IC8+IDogKFxuICAgICAgICAgIDxGcmFnbWVudD5cbiAgICAgICAgICAgIDxoMVxuICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogNXJlbTtcbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgID5OdWV2byBQcm9kdWN0bzwvaDE+XG4gICAgICAgICAgICA8Rm9ybXVsYXJpb1xuICAgICAgICAgICAgICBvblN1Ym1pdD17aGFuZGxlU3VibWl0fVxuICAgICAgICAgICAgICBub1ZhbGlkYXRlXG4gICAgICAgICAgICA+XG5cbiAgICAgICAgICAgICAgPGZpZWxkc2V0PlxuICAgICAgICAgICAgICAgIDxsZWdlbmQ+SW5mb3JtYWNpw7NuIGRlbCBQcm9kdWN0bzwvbGVnZW5kPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8Q2FtcG8+XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cIm5vbWJyZVwiPk5vbWJyZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICBpZD1cIm5vbWJyZVwiICAgXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTm9tYnJlIGRlbCBQcm9kdWN0b1wiXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJub21icmVcIlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17bm9tYnJlfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICBvbkJsdXI9e2hhbmRsZUJsdXJ9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvQ2FtcG8+XG5cbiAgICAgICAgICAgICAgICB7ZXJyb3Jlcy5ub21icmUgJiYgPEVycm9yZXM+e2Vycm9yZXMubm9tYnJlfTwvRXJyb3Jlcz59XG4gICAgICBcbiAgICAgICAgICAgICAgICA8Q2FtcG8+XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImVtcHJlc2FcIj5FbXByZXNhPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiZW1wcmVzYVwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTm9tYnJlIEVtcHJlc2EgbyBDb21wYW7DrWFcIlxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZW1wcmVzYVwiXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtlbXByZXNhfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICBvbkJsdXI9e2hhbmRsZUJsdXJ9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvQ2FtcG8+XG5cbiAgICAgICAgICAgICAgICB7ZXJyb3Jlcy5lbXByZXNhICYmIDxFcnJvcmVzPntlcnJvcmVzLmVtcHJlc2F9PC9FcnJvcmVzPn1cblxuICAgICAgICAgICAgICAgIDxDYW1wbz5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiaW1hZ2VuXCI+SW1hZ2VuPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxGaWxlVXBsb2FkZXJcbiAgICAgICAgICAgICAgICAgICAgYWNjZXB0PVwiaW1hZ2UvKlwiXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiaW1hZ2VuXCJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImltYWdlblwiXG4gICAgICAgICAgICAgICAgICAgIHJhbmRvbWl6ZUZpbGVuYW1lXG4gICAgICAgICAgICAgICAgICAgIHN0b3JhZ2VSZWY9e2ZpcmViYXNlLnN0b3JhZ2UucmVmKFwicHJvZHVjdG9zXCIpfVxuICAgICAgICAgICAgICAgICAgICBvblVwbG9hZFN0YXJ0PXtoYW5kbGVVcGxvYWRTdGFydH1cbiAgICAgICAgICAgICAgICAgICAgb25VcGxvYWRFcnJvcj17aGFuZGxlVXBsb2FkRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIG9uVXBsb2FkU3VjY2Vzcz17aGFuZGxlVXBsb2FkU3VjY2Vzc31cbiAgICAgICAgICAgICAgICAgICAgb25Qcm9ncmVzcz17aGFuZGxlUHJvZ3Jlc3N9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvQ2FtcG8+XG5cbiAgICAgICAgICAgICAgICA8Q2FtcG8+XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInVybFwiPlVSTDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cInVybFwiXG4gICAgICAgICAgICAgICAgICAgIGlkPVwidXJsXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJVUkwgZGUgdHUgcHJvZHVjdG9cIlxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwidXJsXCJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3VybH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgb25CbHVyPXtoYW5kbGVCbHVyfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0NhbXBvPlxuXG4gICAgICAgICAgICAgICAge2Vycm9yZXMudXJsICYmIDxFcnJvcmVzPntlcnJvcmVzLnVybH08L0Vycm9yZXM+fSAgXG5cbiAgICAgICAgICAgICAgPC9maWVsZHNldD5cblxuICAgICAgICAgICAgICA8ZmllbGRzZXQ+XG4gICAgICAgICAgICAgICAgPGxlZ2VuZD5Tb2JyZSB0dSBwcm9kdWN0bzwvbGVnZW5kPlxuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPENhbXBvPlxuICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJkZXNjcmlwY2lvblwiPkRlc2NyaXBjacOzbjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiZGVzY3JpcGNpb25cIlxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcGNpb25cIlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZGVzY3JpcGNpb259XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIG9uQmx1cj17aGFuZGxlQmx1cn1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9DYW1wbz5cblxuICAgICAgICAgICAgICAgIHtlcnJvcmVzLmRlc2NyaXBjaW9uICYmIDxFcnJvcmVzPntlcnJvcmVzLmRlc2NyaXBjaW9ufTwvRXJyb3Jlcz59XG4gICAgICAgICAgICAgIDwvZmllbGRzZXQ+XG5cblxuXG4gICAgICAgICAgICAgIHtlcnJvciAmJiA8RXJyb3Jlcz57ZXJyb3J9PC9FcnJvcmVzPn1cbiAgICBcbiAgICAgICAgICAgICAgPElucHV0U3VibWl0XG4gICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9XCJDcmVhciBQcm9kdWN0b1wiXG4gICAgICAgICAgICAgIC8+XG4gICAgXG4gICAgICAgICAgICA8L0Zvcm11bGFyaW8+XG4gICAgICAgICAgPC9GcmFnbWVudD5cbiAgICAgICAgKX1cbiAgICAgIDwvTGF5b3V0PlxuICAgICAgICBcbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBOdWV2b1Byb2R1Y3RvOyJdfQ== */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\n\nvar NuevoProducto = function NuevoProducto() {\n  _s();\n\n  //State de las imagnes\n  var _useState = useState(''),\n      nombreimagen = _useState[0],\n      guardarNombre = _useState[1];\n\n  var _useState2 = useState(false),\n      subiendo = _useState2[0],\n      guardarSubiendo = _useState2[1];\n\n  var _useState3 = useState(0),\n      progreso = _useState3[0],\n      guardarProgreso = _useState3[1];\n\n  var _useState4 = useState(''),\n      urlImagen = _useState4[0],\n      guardarUrlImagen = _useState4[1];\n\n  var _useState5 = useState(''),\n      error = _useState5[0],\n      guardarError = _useState5[1];\n\n  var _useValidacion = useValidacion(STATE_INICIAL, validarCrearProducto, crearProducto),\n      valores = _useValidacion.valores,\n      errores = _useValidacion.errores,\n      handleChange = _useValidacion.handleChange,\n      handleSubmit = _useValidacion.handleSubmit,\n      handleBlur = _useValidacion.handleBlur;\n\n  var nombre = valores.nombre,\n      empresa = valores.empresa,\n      imagen = valores.imagen,\n      url = valores.url,\n      descripcion = valores.descripcion; //Hook de routing para redireccionar\n\n  var router = useRouter(); //Context con las operaciones crud de firebase\n\n  var _useContext = useContext(FirebaseContext),\n      usuario = _useContext.usuario,\n      firebase = _useContext.firebase;\n\n  function crearProducto() {\n    return _crearProducto.apply(this, arguments);\n  }\n\n  function _crearProducto() {\n    _crearProducto = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var producto;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (usuario) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", router.push('/login'));\n\n            case 2:\n              //Crear el objeto de nuevo producto\n              producto = {\n                nombre: nombre,\n                empresa: empresa,\n                url: url,\n                urlImagen: urlImagen,\n                descripcion: descripcion,\n                votos: 0,\n                comentarios: [],\n                creado: Date.now(),\n                creador: {\n                  id: usuario.uid,\n                  nombre: usuario.displayName\n                },\n                haVotado: []\n              }; //Insertarlo en la base de datos\n\n              firebase.db.collection('productos').add(producto);\n              return _context.abrupt(\"return\", router.push('/'));\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _crearProducto.apply(this, arguments);\n  }\n\n  var handleUploadStart = function handleUploadStart() {\n    guardarProgreso(0);\n    guardarSubiendo(true);\n  };\n\n  var handleProgress = function handleProgress(progreso) {\n    return guardarProgreso({\n      progreso: progreso\n    });\n  };\n\n  var handleUploadError = function handleUploadError(error) {\n    guardarSubiendo(error);\n    console.error(error);\n  };\n\n  var handleUploadSuccess = function handleUploadSuccess(nombre) {\n    guardarProgreso(100);\n    guardarSubiendo(false);\n    guardarNombre(nombre);\n    firebase.storage.ref(\"productos\").child(nombre).getDownloadURL().then(function (url) {\n      console.log(url);\n      guardarUrlImagen(url);\n    });\n  };\n\n  return ___EmotionJSX(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, ___EmotionJSX(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, !usuario ? ___EmotionJSX(Error404, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }) : ___EmotionJSX(Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, ___EmotionJSX(\"h1\", {\n    css: _ref,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, \"Nuevo Producto\"), ___EmotionJSX(Formulario, {\n    onSubmit: handleSubmit,\n    noValidate: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, ___EmotionJSX(\"fieldset\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, ___EmotionJSX(\"legend\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, \"Informaci\\xF3n del Producto\"), ___EmotionJSX(Campo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, ___EmotionJSX(\"label\", {\n    htmlFor: \"nombre\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 19\n    }\n  }, \"Nombre\"), ___EmotionJSX(\"input\", {\n    type: \"text\",\n    id: \"nombre\",\n    placeholder: \"Nombre del Producto\",\n    name: \"nombre\",\n    value: nombre,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 19\n    }\n  })), errores.nombre && ___EmotionJSX(Errores, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 36\n    }\n  }, errores.nombre), ___EmotionJSX(Campo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, ___EmotionJSX(\"label\", {\n    htmlFor: \"empresa\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 19\n    }\n  }, \"Empresa\"), ___EmotionJSX(\"input\", {\n    type: \"text\",\n    id: \"empresa\",\n    placeholder: \"Nombre Empresa o Compan\\xEDa\",\n    name: \"empresa\",\n    value: empresa,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }\n  })), errores.empresa && ___EmotionJSX(Errores, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 37\n    }\n  }, errores.empresa), ___EmotionJSX(Campo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, ___EmotionJSX(\"label\", {\n    htmlFor: \"imagen\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 19\n    }\n  }, \"Imagen\"), ___EmotionJSX(FileUploader, {\n    accept: \"image/*\",\n    id: \"imagen\",\n    name: \"imagen\",\n    randomizeFilename: true,\n    storageRef: firebase.storage.ref(\"productos\"),\n    onUploadStart: handleUploadStart,\n    onUploadError: handleUploadError,\n    onUploadSuccess: handleUploadSuccess,\n    onProgress: handleProgress,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 19\n    }\n  })), ___EmotionJSX(Campo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, ___EmotionJSX(\"label\", {\n    htmlFor: \"url\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 19\n    }\n  }, \"URL\"), ___EmotionJSX(\"input\", {\n    type: \"url\",\n    id: \"url\",\n    placeholder: \"URL de tu producto\",\n    name: \"url\",\n    value: url,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }\n  })), errores.url && ___EmotionJSX(Errores, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 33\n    }\n  }, errores.url)), ___EmotionJSX(\"fieldset\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  }, ___EmotionJSX(\"legend\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, \"Sobre tu producto\"), ___EmotionJSX(Campo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }, ___EmotionJSX(\"label\", {\n    htmlFor: \"descripcion\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 19\n    }\n  }, \"Descripci\\xF3n\"), ___EmotionJSX(\"textarea\", {\n    id: \"descripcion\",\n    name: \"descripcion\",\n    value: descripcion,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 19\n    }\n  })), errores.descripcion && ___EmotionJSX(Errores, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 41\n    }\n  }, errores.descripcion)), error && ___EmotionJSX(Errores, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 25\n    }\n  }, error), ___EmotionJSX(InputSubmit, {\n    type: \"submit\",\n    value: \"Crear Producto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  })))));\n};\n\n_s(NuevoProducto, \"xPwCbi4rvao96/NpoT4R6uTc8hc=\", false, function () {\n  return [useValidacion, useRouter];\n});\n\n_c = NuevoProducto;\nexport default NuevoProducto;\n\nvar _c;\n\n$RefreshReg$(_c, \"NuevoProducto\");","map":{"version":3,"sources":["/Users/gerardorosas/Documents/producthunt/pages/nuevo-producto.js"],"names":["React","Fragment","useState","useContext","css","Layout","Router","useRouter","Formulario","Campo","InputSubmit","Errores","FirebaseContext","FileUploader","Error404","useValidacion","validarCrearProducto","STATE_INICIAL","nombre","empresa","url","descripcion","NuevoProducto","nombreimagen","guardarNombre","subiendo","guardarSubiendo","progreso","guardarProgreso","urlImagen","guardarUrlImagen","error","guardarError","crearProducto","valores","errores","handleChange","handleSubmit","handleBlur","imagen","router","usuario","firebase","push","producto","votos","comentarios","creado","Date","now","creador","id","uid","displayName","haVotado","db","collection","add","handleUploadStart","handleProgress","handleUploadError","console","handleUploadSuccess","storage","ref","child","getDownloadURL","then","log"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useContext } from 'react';\nimport { css } from '@emotion/core';\nimport Layout from '../components/layout/Layout';\nimport Router, { useRouter } from 'next/router';\nimport { Formulario, Campo, InputSubmit, Errores } from '../components/UI/Formulario';\nimport { FirebaseContext } from '../firebase';\nimport FileUploader from 'react-firebase-file-uploader';\nimport Error404 from '../components/layout/404';\n\nimport useValidacion from '../hooks/useValidacion';\nimport validarCrearProducto from '../validacion/validarCrearProducto';\n\nconst STATE_INICIAL = {\n  nombre: '',\n  empresa: '',\n  //imagen: '',\n  url: '',\n  descripcion: ''\n}\n\nconst NuevoProducto = () => {\n\n  //State de las imagnes\n  const [ nombreimagen, guardarNombre ] = useState('');\n  const [ subiendo, guardarSubiendo ] = useState(false);\n  const [ progreso, guardarProgreso ] = useState(0);\n  const [ urlImagen, guardarUrlImagen ] = useState('');\n  \n  const [ error, guardarError ] = useState('');\n\n  const {valores, errores, handleChange, handleSubmit, handleBlur} = useValidacion\n  (STATE_INICIAL, validarCrearProducto, crearProducto);\n\n  const{ nombre, empresa, imagen, url, descripcion } = valores;\n\n  //Hook de routing para redireccionar\n  const router = useRouter();\n\n  //Context con las operaciones crud de firebase\n  const { usuario, firebase } = useContext(FirebaseContext);\n\n\n  async function crearProducto(){\n    //Si el usuario no esta auntenticado llevar al login\n    if(!usuario) {\n      return router.push('/login');\n    } \n\n    //Crear el objeto de nuevo producto\n    const producto = {\n      nombre,\n      empresa,\n      url,\n      urlImagen,\n      descripcion,\n      votos: 0,\n      comentarios : [],\n      creado: Date.now(), \n      creador: {\n        id: usuario.uid,\n        nombre: usuario.displayName\n      },\n      haVotado: []\n    }\n\n    //Insertarlo en la base de datos\n    firebase.db.collection('productos').add(producto);\n\n    return router.push('/');\n\n  }\n\n  const handleUploadStart = () => {\n    guardarProgreso(0);\n    guardarSubiendo(true);\n  }\n\n  const handleProgress = progreso => guardarProgreso({ progreso });\n\n  const handleUploadError = error => {\n      guardarSubiendo(error);\n      console.error(error);\n  };\n\n  const handleUploadSuccess = nombre => {\n      guardarProgreso(100);\n      guardarSubiendo(false);\n      guardarNombre(nombre)\n      firebase\n          .storage\n          .ref(\"productos\")\n          .child(nombre)\n          .getDownloadURL()\n          .then(url => {\n            console.log(url);\n            guardarUrlImagen(url);\n          } );\n  };\n\n  return (\n    <div>\n      <Layout>\n        {!usuario ? <Error404 /> : (\n          <Fragment>\n            <h1\n              css={css`\n                text-align: center;\n                margin-top: 5rem;\n              `}\n            >Nuevo Producto</h1>\n            <Formulario\n              onSubmit={handleSubmit}\n              noValidate\n            >\n\n              <fieldset>\n                <legend>Información del Producto</legend>\n              \n                <Campo>\n                  <label htmlFor=\"nombre\">Nombre</label>\n                  <input\n                    type=\"text\"\n                    id=\"nombre\"   \n                    placeholder=\"Nombre del Producto\"\n                    name=\"nombre\"\n                    value={nombre}\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                  />\n                </Campo>\n\n                {errores.nombre && <Errores>{errores.nombre}</Errores>}\n      \n                <Campo>\n                  <label htmlFor=\"empresa\">Empresa</label>\n                  <input\n                    type=\"text\"\n                    id=\"empresa\"\n                    placeholder=\"Nombre Empresa o Companía\"\n                    name=\"empresa\"\n                    value={empresa}\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                  />\n                </Campo>\n\n                {errores.empresa && <Errores>{errores.empresa}</Errores>}\n\n                <Campo>\n                  <label htmlFor=\"imagen\">Imagen</label>\n                  <FileUploader\n                    accept=\"image/*\"\n                    id=\"imagen\"\n                    name=\"imagen\"\n                    randomizeFilename\n                    storageRef={firebase.storage.ref(\"productos\")}\n                    onUploadStart={handleUploadStart}\n                    onUploadError={handleUploadError}\n                    onUploadSuccess={handleUploadSuccess}\n                    onProgress={handleProgress}\n                  />\n                </Campo>\n\n                <Campo>\n                  <label htmlFor=\"url\">URL</label>\n                  <input\n                    type=\"url\"\n                    id=\"url\"\n                    placeholder=\"URL de tu producto\"\n                    name=\"url\"\n                    value={url}\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                  />\n                </Campo>\n\n                {errores.url && <Errores>{errores.url}</Errores>}  \n\n              </fieldset>\n\n              <fieldset>\n                <legend>Sobre tu producto</legend>\n\n                \n                <Campo>\n                  <label htmlFor=\"descripcion\">Descripción</label>\n                  <textarea\n                    \n                    id=\"descripcion\"\n                    name=\"descripcion\"\n                    value={descripcion}\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                  />\n                </Campo>\n\n                {errores.descripcion && <Errores>{errores.descripcion}</Errores>}\n              </fieldset>\n\n\n\n              {error && <Errores>{error}</Errores>}\n    \n              <InputSubmit\n                type=\"submit\"\n                value=\"Crear Producto\"\n              />\n    \n            </Formulario>\n          </Fragment>\n        )}\n      </Layout>\n        \n    </div>\n  )\n}\n\nexport default NuevoProducto;"]},"metadata":{},"sourceType":"module"}