(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"2qVx":function(e,t,r){"use strict";r.r(t);var n=r("rePB");function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=r("o0o1"),i=r.n(c),s=r("HaE+"),u=r("wTIg"),l=r("q1tI"),d=r.n(l),p=r("nOHt"),m=r("xWvD"),b=r("oHpw"),f=r("uM4m"),g=r("qKvR");Object(u.a)("form",{target:"e1r6tjkf0"})({name:"4e158y",styles:"max-width:600px;width:95%;margin:5rem auto 0 auto;fieldset{margin:2rem 0;border:1px solid #e1e1e1;font-size:2rem;padding:2rem}"});var j=Object(u.a)("div",{target:"e1r6tjkf1"})({name:"1a8wuji",styles:"margin-bottom:2rem;display:flex;align-items:center;label{flex:0 0 150px;font-size:1.8rem;}input,textarea{flex:1;padding:1rem;}textarea{height:300px;}"}),O=Object(u.a)("input",{target:"e1r6tjkf2"})({name:"5gttg",styles:"background-color:var(--naranja);width:100%;padding:1.2rem;text-align:center;color:#FFF;font-size:1.8rem;text-transform:uppercase;border:none;font-family:'PT Sans',sans-serif;font-weight:700;&:hover{cursor:pointer;}"}),y=(Object(u.a)("p",{target:"e1r6tjkf3"})({name:"16hlejl",styles:"background-color:red;padding:1rem;font-family:'PT Sans',sans-serif;font-weight:700;text-align:center;color:#FFF;text-transform:uppercase;font-size:1.4rem;margin:2rem 0;"}),Object(u.a)("a",{target:"e5h2yx80"})("display:block;font-weight:700;text-transform:uppercase;text-align:center;border:1px solid #d1d1d1;padding:.8rem 2rem;margin:2rem auto;background-color:",(function(e){return e.bgColor?"#DA552F":"white"}),";color:",(function(e){return e.bgColor?"white":"#000"}),";&:last-of-type{margin-right:0;}&:hover{cursor:pointer;}"));d.a.createElement;function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=Object(u.a)("div",{target:"eedffhf0"})({name:"uunn56",styles:"@media(min-width:768px){display:grid;grid-template-columns:2fr 1fr;column-gap:2rem;}"}),w=Object(u.a)("p",{target:"eedffhf1"})({name:"15q0m4y",styles:"padding:.5rem 2rem;background-color:#DA552F;color:#fff;text-transform:uppercase;font-weight:bold;text-align:center;display:inline-block;"}),k={name:"1ap128e",styles:"text-align:center;margin-top:5rem;"},P={name:"xqqg40",styles:"margin:2rem 0;"},S={name:"1x0f0jw",styles:"border:1px solid #e1e1e1;padding:2rem;"},A={name:"in3yi3",styles:"font-weight:bold;"},C={name:"aeoew",styles:"margin-top:5rem;"},E={name:"xi606m",styles:"text-align:center;"};t.default=function(){var e=Object(l.useState)({}),t=e[0],r=e[1],o=Object(l.useState)(!1),c=o[0],u=o[1],h=Object(l.useState)({}),q=h[0],F=h[1],I=Object(l.useState)(!0),V=I[0],D=I[1],N=Object(p.useRouter)(),_=N.query.id,T=Object(l.useContext)(m.a),z=T.firebase,R=T.usuario;if(Object(l.useEffect)((function(){_&&V&&function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.db.collection("productos").doc(_);case 2:return t=e.sent,e.next=5,t.get();case 5:(n=e.sent).exists?(r(n.data()),D(!1)):(u(!0),D(!1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[_]),0===Object.keys(t).length&&!c)return"Cargando...";var H=t.comentarios,M=(t.empresa,t.descripcion),W=t.votos,J=t.nombre,K=t.url,U=t.urlImagen,X=(t.creado,t.creador),B=t.haVotado,L=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=2;break}return e.abrupt("return",N.push("/login"));case 2:if(X.id===R.uid){e.next=4;break}return e.abrupt("return",N.push("/login"));case 4:return e.prev=4,e.next=7,z.db.collection("productos").doc(_).delete();case 7:N.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();return Object(g.c)(b.a,null,Object(g.c)(d.a.Fragment,null,c&&Object(g.c)(f.a,null),Object(g.c)("div",{className:"contenedor"},Object(g.c)("h1",{css:k},J),Object(g.c)(x,null,Object(g.c)("div",null,Object(g.c)("img",{src:U}),Object(g.c)("p",null,M),R&&Object(g.c)(d.a.Fragment,null,Object(g.c)("h2",null,"Agrega tu comentario"),Object(g.c)("form",{onSubmit:function(e){if(e.preventDefault(),!R)return N.push("/login");q.usuarioId=R.uid,q.usuarioNombre=R.displayName;var n=[].concat(a(H),[q]);z.db.collection("productos").doc(_).update({comentarios:n}),r(v(v({},t),{},{comentarios:n}))}},Object(g.c)(j,null,Object(g.c)("input",{type:"text",name:"mensaje",onChange:function(e){F(v(v({},q),{},Object(n.a)({},e.target.name,e.target.value)))}})),Object(g.c)(O,{type:"submit",value:"Agregar Comentario"}))),Object(g.c)("h2",{css:P},"Comentarios"),0===H.length?"A\xfan no hay comentarios":Object(g.c)("ul",null,H.map((function(e,t){return Object(g.c)("li",{key:"".concat(e.usuarioId,"-").concat(t),css:S},Object(g.c)("p",null,e.mensaje),Object(g.c)("p",null,"Escrito por:",Object(g.c)("span",{css:A},""," ",e.usuarioNombre)),function(e){if(X.id===e)return!0}(e.usuarioId)&&Object(g.c)(w,null,"Es Creador"))})))),Object(g.c)("aside",null,Object(g.c)(y,{target:"_blank",bgColor:"true",href:K},"Visitar URL"),Object(g.c)("div",{css:C},Object(g.c)("p",{css:E},W," Votos"),R&&Object(g.c)(y,{onClick:function(){if(!R)return N.push("/login");var e=W+1;if(!B.includes(R.uid)){var n=[].concat(a(B),[R.uid]);z.db.collection("productos").doc(_).update({votos:e,haVotado:n}),r(v(v({},t),{},{votos:e})),D(!0)}}},"Votar")))),!!R&&(X.id===R.uid||void 0)&&Object(g.c)(y,{onClick:L},"Eliminar Producto"))))}},"VWc+":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/productos/[id]",function(){return r("2qVx")}])},uM4m:function(e,t,r){"use strict";var n=r("q1tI"),o=r.n(n),a=r("qKvR");o.a.createElement;var c={name:"u2wvoe",styles:"margin-top:5rem;text-align:center;"};t.a=function(){return Object(a.c)("h1",{css:c},"No se puede mostrar")}}},[["VWc+",1,2,3,5,6,0,4,7]]]);